<!DOCTYPE html>
<html ng-app="wscat">
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<style>
	   canvas {
	   	 width: 100%;
	   	 height: 300px;
	   }
	</style>   
	<body>
		<div ng-controller="indexCtrl">
			
		</div>
	</body>
	<script type="text/javascript" src="js/angular.js" ></script>
	<script>
		var app = angular.module("wscat",[]);
		    app.controller("indexCtrl",function($scope,hh,$document,$interval){
		    	
		    	var cans = hh.m('indexCtrl',{
		    		color:'blue',
					width:1,
					default:{
					x:0,
					y:0
				}
		    	})
		    	cans.lineTo(40,90)
//		    	var offset = 10;
//			   $interval(function(){
//				cans.lineTo(offset, parseInt(Math.random()*51));
//				cans.stroke();
//				offset+=10;
//			},1000)
		    });
		    
		    app.service("hh",function($document){
		    	return {
		    		e: function(ctrl) {
		    			var can = $document[0].querySelector('[ng-controller='+ctrl+']');
		    			var canvas = $document[0].createElement("canvas");
		    			 canvas.id = ctrl+"canvas";
		    			    can.appendChild(canvas);
		    			     return canvas;
		    		},
		    		m:function(ctrl,params){
		    			
		    			var can = this.e(ctrl);
		    			
		    			var cans = can.getContext('2d');
		    			
		    			cans.moveTo(params.default.x,params.default.y);
		    			cans.lineWidth = params.width;
		    			cans.strokeStyle = params.color;
		    			
		    			return cans;
		    		}
		    		
		    	}
		    })
	</script>
</html>
