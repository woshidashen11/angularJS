(function(){var n=this,t=n._,r=Array.prototype,e=Object.prototype,u=Function.prototype,i=r.push,a=r.slice,o=r.concat,l=e.toString,c=e.hasOwnProperty,f=Array.isArray,s=Object.keys,p=u.bind,h=function(n){return n instanceof h?n:this instanceof h?void(this._wrapped=n):new h(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=h),exports._=h):n._=h,h.VERSION="1.7.0";var g=function(n,t,r){if(void 0===t)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}};h.iteratee=function(n,t,r){return null==n?h.identity:h.isFunction(n)?g(n,t,r):h.isObject(n)?h.matches(n):h.property(n)},h.each=h.forEach=function(n,t,r){if(null==n)return n;t=g(t,r);var e,u=n.length;if(u===+u)for(e=0;u>e;e++)t(n[e],e,n);else{var i=h.keys(n);for(e=0,u=i.length;u>e;e++)t(n[i[e]],i[e],n)}return n},h.map=h.collect=function(n,t,r){if(null==n)return[];t=h.iteratee(t,r);for(var e,u=n.length!==+n.length&&h.keys(n),i=(u||n).length,a=Array(i),o=0;i>o;o++)e=u?u[o]:o,a[o]=t(n[e],e,n);return a};var v="Reduce of empty array with no initial value";h.reduce=h.foldl=h.inject=function(n,t,r,e){null==n&&(n=[]),t=g(t,e,4);var u,i=n.length!==+n.length&&h.keys(n),a=(i||n).length,o=0;if(arguments.length<3){if(!a)throw new TypeError(v);r=n[i?i[o++]:o++]}for(;a>o;o++)u=i?i[o]:o,r=t(r,n[u],u,n);return r},h.reduceRight=h.foldr=function(n,t,r,e){null==n&&(n=[]),t=g(t,e,4);var u,i=n.length!==+n.length&&h.keys(n),a=(i||n).length;if(arguments.length<3){if(!a)throw new TypeError(v);r=n[i?i[--a]:--a]}for(;a--;)u=i?i[a]:a,r=t(r,n[u],u,n);return r},h.find=h.detect=function(n,t,r){var e;return t=h.iteratee(t,r),h.some(n,function(n,r,u){return t(n,r,u)?(e=n,!0):void 0}),e},h.filter=h.select=function(n,t,r){var e=[];return null==n?e:(t=h.iteratee(t,r),h.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e)},h.reject=function(n,t,r){return h.filter(n,h.negate(h.iteratee(t)),r)},h.every=h.all=function(n,t,r){if(null==n)return!0;t=h.iteratee(t,r);var e,u,i=n.length!==+n.length&&h.keys(n),a=(i||n).length;for(e=0;a>e;e++)if(u=i?i[e]:e,!t(n[u],u,n))return!1;return!0},h.some=h.any=function(n,t,r){if(null==n)return!1;t=h.iteratee(t,r);var e,u,i=n.length!==+n.length&&h.keys(n),a=(i||n).length;for(e=0;a>e;e++)if(u=i?i[e]:e,t(n[u],u,n))return!0;return!1},h.contains=h.include=function(n,t){return null==n?!1:(n.length!==+n.length&&(n=h.values(n)),h.indexOf(n,t)>=0)},h.invoke=function(n,t){var r=a.call(arguments,2),e=h.isFunction(t);return h.map(n,function(n){return(e?t:n[t]).apply(n,r)})},h.pluck=function(n,t){return h.map(n,h.property(t))},h.where=function(n,t){return h.filter(n,h.matches(t))},h.findWhere=function(n,t){return h.find(n,h.matches(t))},h.max=function(n,t,r){var e,u,i=-1/0,a=-1/0;if(null==t&&null!=n){n=n.length===+n.length?n:h.values(n);for(var o=0,l=n.length;l>o;o++)e=n[o],e>i&&(i=e)}else t=h.iteratee(t,r),h.each(n,function(n,r,e){u=t(n,r,e),(u>a||u===-1/0&&i===-1/0)&&(i=n,a=u)});return i},h.min=function(n,t,r){var e,u,i=1/0,a=1/0;if(null==t&&null!=n){n=n.length===+n.length?n:h.values(n);for(var o=0,l=n.length;l>o;o++)e=n[o],i>e&&(i=e)}else t=h.iteratee(t,r),h.each(n,function(n,r,e){u=t(n,r,e),(a>u||1/0===u&&1/0===i)&&(i=n,a=u)});return i},h.shuffle=function(n){for(var t,r=n&&n.length===+n.length?n:h.values(n),e=r.length,u=Array(e),i=0;e>i;i++)t=h.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},h.sample=function(n,t,r){return null==t||r?(n.length!==+n.length&&(n=h.values(n)),n[h.random(n.length-1)]):h.shuffle(n).slice(0,Math.max(0,t))},h.sortBy=function(n,t,r){return t=h.iteratee(t,r),h.pluck(h.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(e>r||void 0===e)return-1}return n.index-t.index}),"value")};var m=function(n){return function(t,r,e){var u={};return r=h.iteratee(r,e),h.each(t,function(e,i){var a=r(e,i,t);n(u,e,a)}),u}};h.groupBy=m(function(n,t,r){h.has(n,r)?n[r].push(t):n[r]=[t]}),h.indexBy=m(function(n,t,r){n[r]=t}),h.countBy=m(function(n,t,r){h.has(n,r)?n[r]++:n[r]=1}),h.sortedIndex=function(n,t,r,e){r=h.iteratee(r,e,1);for(var u=r(t),i=0,a=n.length;a>i;){var o=i+a>>>1;r(n[o])<u?i=o+1:a=o}return i},h.toArray=function(n){return n?h.isArray(n)?a.call(n):n.length===+n.length?h.map(n,h.identity):h.values(n):[]},h.size=function(n){return null==n?0:n.length===+n.length?n.length:h.keys(n).length},h.partition=function(n,t,r){t=h.iteratee(t,r);var e=[],u=[];return h.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},h.first=h.head=h.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:0>t?[]:a.call(n,0,t)},h.initial=function(n,t,r){return a.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},h.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:a.call(n,Math.max(n.length-t,0))},h.rest=h.tail=h.drop=function(n,t,r){return a.call(n,null==t||r?1:t)},h.compact=function(n){return h.filter(n,h.identity)};var y=function(n,t,r,e){if(t&&h.every(n,h.isArray))return o.apply(e,n);for(var u=0,a=n.length;a>u;u++){var l=n[u];h.isArray(l)||h.isArguments(l)?t?i.apply(e,l):y(l,t,r,e):r||e.push(l)}return e};h.flatten=function(n,t){return y(n,t,!1,[])},h.without=function(n){return h.difference(n,a.call(arguments,1))},h.uniq=h.unique=function(n,t,r,e){if(null==n)return[];h.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=h.iteratee(r,e));for(var u=[],i=[],a=0,o=n.length;o>a;a++){var l=n[a];if(t)a&&i===l||u.push(l),i=l;else if(r){var c=r(l,a,n);h.indexOf(i,c)<0&&(i.push(c),u.push(l))}else h.indexOf(u,l)<0&&u.push(l)}return u},h.union=function(){return h.uniq(y(arguments,!0,!0,[]))},h.intersection=function(n){if(null==n)return[];for(var t=[],r=arguments.length,e=0,u=n.length;u>e;e++){var i=n[e];if(!h.contains(t,i)){for(var a=1;r>a&&h.contains(arguments[a],i);a++);a===r&&t.push(i)}}return t},h.difference=function(n){var t=y(a.call(arguments,1),!0,!0,[]);return h.filter(n,function(n){return!h.contains(t,n)})},h.zip=function(n){if(null==n)return[];for(var t=h.max(arguments,"length").length,r=Array(t),e=0;t>e;e++)r[e]=h.pluck(arguments,e);return r},h.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},h.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=h.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}for(;u>e;e++)if(n[e]===t)return e;return-1},h.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=n.length;for("number"==typeof r&&(e=0>r?e+r+1:Math.min(e,r+1));--e>=0;)if(n[e]===t)return e;return-1},h.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;e>i;i++,n+=r)u[i]=n;return u};var d=function(){};h.bind=function(n,t){var r,e;if(p&&n.bind===p)return p.apply(n,a.call(arguments,1));if(!h.isFunction(n))throw new TypeError("Bind must be called on a function");return r=a.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(a.call(arguments)));d.prototype=n.prototype;var u=new d;d.prototype=null;var i=n.apply(u,r.concat(a.call(arguments)));return h.isObject(i)?i:u}},h.partial=function(n){var t=a.call(arguments,1);return function(){for(var r=0,e=t.slice(),u=0,i=e.length;i>u;u++)e[u]===h&&(e[u]=arguments[r++]);for(;r<arguments.length;)e.push(arguments[r++]);return n.apply(this,e)}},h.bindAll=function(n){var t,r,e=arguments.length;if(1>=e)throw new Error("bindAll must be passed function names");for(t=1;e>t;t++)r=arguments[t],n[r]=h.bind(n[r],n);return n},h.memoize=function(n,t){var r=function(e){var u=r.cache,i=t?t.apply(this,arguments):e;return h.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},h.delay=function(n,t){var r=a.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},h.defer=function(n){return h.delay.apply(h,[n,1].concat(a.call(arguments,1)))},h.throttle=function(n,t,r){var e,u,i,a=null,o=0;r||(r={});var l=function(){o=r.leading===!1?0:h.now(),a=null,i=n.apply(e,u),a||(e=u=null)};return function(){var c=h.now();o||r.leading!==!1||(o=c);var f=t-(c-o);return e=this,u=arguments,0>=f||f>t?(clearTimeout(a),a=null,o=c,i=n.apply(e,u),a||(e=u=null)):a||r.trailing===!1||(a=setTimeout(l,f)),i}},h.debounce=function(n,t,r){var e,u,i,a,o,l=function(){var c=h.now()-a;t>c&&c>0?e=setTimeout(l,t-c):(e=null,r||(o=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,a=h.now();var c=r&&!e;return e||(e=setTimeout(l,t)),c&&(o=n.apply(i,u),i=u=null),o}},h.wrap=function(n,t){return h.partial(t,n)},h.negate=function(n){return function(){return!n.apply(this,arguments)}},h.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},h.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},h.before=function(n,t){var r;return function(){return--n>0?r=t.apply(this,arguments):t=null,r}},h.once=h.partial(h.before,2),h.keys=function(n){if(!h.isObject(n))return[];if(s)return s(n);var t=[];for(var r in n)h.has(n,r)&&t.push(r);return t},h.values=function(n){for(var t=h.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},h.pairs=function(n){for(var t=h.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},h.invert=function(n){for(var t={},r=h.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},h.functions=h.methods=function(n){var t=[];for(var r in n)h.isFunction(n[r])&&t.push(r);return t.sort()},h.extend=function(n){if(!h.isObject(n))return n;for(var t,r,e=1,u=arguments.length;u>e;e++){t=arguments[e];for(r in t)c.call(t,r)&&(n[r]=t[r])}return n},h.pick=function(n,t,r){var e,u={};if(null==n)return u;if(h.isFunction(t)){t=g(t,r);for(e in n){var i=n[e];t(i,e,n)&&(u[e]=i)}}else{var l=o.apply([],a.call(arguments,1));n=new Object(n);for(var c=0,f=l.length;f>c;c++)e=l[c],e in n&&(u[e]=n[e])}return u},h.omit=function(n,t,r){if(h.isFunction(t))t=h.negate(t);else{var e=h.map(o.apply([],a.call(arguments,1)),String);t=function(n,t){return!h.contains(e,t)}}return h.pick(n,t,r)},h.defaults=function(n){if(!h.isObject(n))return n;for(var t=1,r=arguments.length;r>t;t++){var e=arguments[t];for(var u in e)void 0===n[u]&&(n[u]=e[u])}return n},h.clone=function(n){return h.isObject(n)?h.isArray(n)?n.slice():h.extend({},n):n},h.tap=function(n,t){return t(n),n};var b=function(n,t,r,e){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof h&&(n=n._wrapped),t instanceof h&&(t=t._wrapped);var u=l.call(n);if(u!==l.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case"[object Date]":case"[object Boolean]":return+n===+t}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]===n)return e[i]===t;var a=n.constructor,o=t.constructor;if(a!==o&&"constructor"in n&&"constructor"in t&&!(h.isFunction(a)&&a instanceof a&&h.isFunction(o)&&o instanceof o))return!1;r.push(n),e.push(t);var c,f;if("[object Array]"===u){if(c=n.length,f=c===t.length)for(;c--&&(f=b(n[c],t[c],r,e)););}else{var s,p=h.keys(n);if(c=p.length,f=h.keys(t).length===c)for(;c--&&(s=p[c],f=h.has(t,s)&&b(n[s],t[s],r,e)););}return r.pop(),e.pop(),f};h.isEqual=function(n,t){return b(n,t,[],[])},h.isEmpty=function(n){if(null==n)return!0;if(h.isArray(n)||h.isString(n)||h.isArguments(n))return 0===n.length;for(var t in n)if(h.has(n,t))return!1;return!0},h.isElement=function(n){return!(!n||1!==n.nodeType)},h.isArray=f||function(n){return"[object Array]"===l.call(n)},h.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},h.each(["Arguments","Function","String","Number","Date","RegExp"],function(n){h["is"+n]=function(t){return l.call(t)==="[object "+n+"]"}}),h.isArguments(arguments)||(h.isArguments=function(n){return h.has(n,"callee")}),"function"!=typeof/./&&(h.isFunction=function(n){return"function"==typeof n||!1}),h.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},h.isNaN=function(n){return h.isNumber(n)&&n!==+n},h.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===l.call(n)},h.isNull=function(n){return null===n},h.isUndefined=function(n){return void 0===n},h.has=function(n,t){return null!=n&&c.call(n,t)},h.noConflict=function(){return n._=t,this},h.identity=function(n){return n},h.constant=function(n){return function(){return n}},h.noop=function(){},h.property=function(n){return function(t){return t[n]}},h.matches=function(n){var t=h.pairs(n),r=t.length;return function(n){if(null==n)return!r;n=new Object(n);for(var e=0;r>e;e++){var u=t[e],i=u[0];if(u[1]!==n[i]||!(i in n))return!1}return!0}},h.times=function(n,t,r){var e=Array(Math.max(0,n));t=g(t,r,1);for(var u=0;n>u;u++)e[u]=t(u);return e},h.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},h.now=Date.now||function(){return(new Date).getTime()};var _={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},w=h.invert(_),j=function(n){var t=function(t){return n[t]},r="(?:"+h.keys(n).join("|")+")",e=RegExp(r),u=RegExp(r,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};h.escape=j(_),h.unescape=j(w),h.result=function(n,t){if(null==n)return void 0;var r=n[t];return h.isFunction(r)?n[t]():r};var x=0;h.uniqueId=function(n){var t=++x+"";return n?n+t:t},h.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var A=/(.)^/,k={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},O=/\\|'|\r|\n|\u2028|\u2029/g,F=function(n){return"\\"+k[n]};h.template=function(n,t,r){!t&&r&&(t=r),t=h.defaults({},t,h.templateSettings);var e=RegExp([(t.escape||A).source,(t.interpolate||A).source,(t.evaluate||A).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,a,o){return i+=n.slice(u,o).replace(O,F),u=o+t.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":a&&(i+="';\n"+a+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var a=new Function(t.variable||"obj","_",i)}catch(o){throw o.source=i,o}var l=function(n){return a.call(this,n,h)},c=t.variable||"obj";return l.source="function("+c+"){\n"+i+"}",l},h.chain=function(n){var t=h(n);return t._chain=!0,t};var E=function(n){return this._chain?h(n).chain():n};h.mixin=function(n){h.each(h.functions(n),function(t){var r=h[t]=n[t];h.prototype[t]=function(){var n=[this._wrapped];return i.apply(n,arguments),E.call(this,r.apply(h,n))}})},h.mixin(h),h.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=r[n];h.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==n&&"splice"!==n||0!==r.length||delete r[0],E.call(this,r)}}),h.each(["concat","join","slice"],function(n){var t=r[n];h.prototype[n]=function(){return E.call(this,t.apply(this._wrapped,arguments))}}),h.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return h})}).call(this);
;window.Pagelet=function(){function t(t){i(t)}var n,e=[],o=[],i=function(t){n.$el=$(n.el),n.$el.length&&("function"==typeof n.template&&n.$el.html(n.template()),c(),n.init&&$.isFunction(n.init)&&n.init(t),r())},c=function(){n.$dom={};for(var t,e,o=n.$el.html()||"",i=o.match(/data-node="([^"]*)"/gim)||[],c=i.length-1;c>=0;c--)t=i[c],e=t.split("=")[1].replace(/"/g,""),n.$dom[e]=n.$el.find("["+t+"]")},r=function(){var t,e,o,i,c=n.events,r=n.channels,l=/^(\S+)\s*(.*)$/,p=/^\$/;c&&c instanceof Object&&$.each(c,function(o,c){return $.isFunction(c)||(c=n[c]),c?(i=o.match(l),t=i[1],e=i[2],p.test(e)&&(e='[data-node="'+e.replace("$","")+'"]'),void u(t,e,c)):!0}),r&&r instanceof Object&&$.each(r,function(e,c){return $.isFunction(c)||(c=n[c]),c?(i=e.match(l),o=i[1],t=i[2],void a(o,t,c)):!0})},u=function(t,o,i){n.el||"body";o?n.$el.on(t,o,$.proxy(i,n)):n.$el.on(t,$.proxy(i,n)),e.push([t,o,i])},a=function(t,e,i){listener.on(t,e,$.proxy(i,n)),o.push([t,e,i])};return t.extend=function(t){var e=this,o=function(){return n=this,e.apply(this,arguments)},i=function(){this.constructor=o};return i.prototype=e.prototype,o.prototype=new i,i=null,$.extend(o.prototype,t),o.create=function(t){return new o(t)},o},t}();
;var require,define;!function(r){function e(r,e){var u=a[r]||(a[r]=[]);u.push(e);var o=n[r]||{},p=o.pkg?i[o.pkg].url:o.url||r;if(!(p in f)){f[p]=!0;var s=document.createElement("script");s.type="text/javascript",s.src=p,t.appendChild(s)}}var n,i,t=document.getElementsByTagName("head")[0],a={},u={},o={},f={};define=function(r,e){u[r]=e;var n=a[r];if(n){for(var i=n.length-1;i>=0;--i)n[i]();delete a[r]}},require=function(r){r=require.alias(r);var e=o[r];if(e)return e.exports;var n=u[r];if(!n)throw Error("Cannot find module `"+r+"`");e=o[r]={exports:{}};var i="function"==typeof n?n.apply(e,[require,e.exports,e]):n;return i&&(e.exports=i),e.exports},require.async=function(i,t){function a(r){for(var i=r.length-1;i>=0;--i){var t=r[i];if(!(t in u||t in p)){p[t]=!0,s++,e(t,o);var f=n[t];f&&"deps"in f&&a(f.deps)}}}function o(){if(0==s--){var e,n,a=[];for(e=0,n=i.length;n>e;++e)a[e]=require(i[e]);t&&t.apply(r,a)}}"string"==typeof i&&(i=[i]);for(var f=i.length-1;f>=0;--f)i[f]=require.alias(i[f]);var p={},s=0;a(i),o()},require.resourceMap=function(r){n=r.res||{},i=r.pkg||{}},require.alias=function(r){return r}}(this);
;!function(){var n=50,t=25,e={},r=[].slice,a={},c=function(n,t,r,c){var o=a[n];o||(o=a[n]={}),o[t]=o[t]||[],o[t].push({func:r,context:c||e})},o=function(n,t,r,a){var o=function(){return e.off(n,t,o),r.apply(a||e,arguments)};c(n,t,o,a)},f=function(e,c){if(a[e]&&a[e][c]&&a[e][c].length){for(var o=a[e][c],f=[],i=o.length;i--;)f.push({handler:o[i],args:r.call(arguments,1)});!function(){var e=+new Date;do{var r=f.shift(),a=r.handler;try{a.func.apply(a.context,r.args)}catch(c){}}while(f.length&&+new Date-e<n);f.length>0&&setTimeout(arguments.callee,t)}()}},i=function(n,t,r,c){if(c=c||e,a[n]&&a[n][t]&&a[n][t].length)for(var o,f=a[n][t],i=f.length;i--;)o=f[i],o.func===r&&o.context===c&&f.splice(i,1)};e.on=c,e.once=o,e.trigger=f,e.off=i,window.listener=window.listener||e}();
;window.CONST=window.CONST||{},CONST.nativeProxyServer="http://[::1]:8192/";
;function sendCustomEvents(e,t,o,a,n){var i="bytedance://"+($.os.android?"log_event":"custom_event")+"?label="+e+"&tag="+t;o&&(i=i+"&value="+o),a&&(i=i+"&extra="+a),n&&(i=i+"&extvalue="+n),location.href=i}function errorimg(){errorimglist.push(this.src),console.log("image error :"+this.src),this.style.opacity="0"}function loadimg(){var e=this.parentNode;if(e){var t=this.offsetHeight-e.offsetHeight;/list_img_holder/.test(e.className)&&-5>t&&(this.style.marginTop=-t/2+"px"),this.style.opacity="1",e.style.background="none"}}function ajaxNetworkErrorCallback(){global_tip(NETWORKTIPS.NETWORKERROR)}function actionLog(e,t,o,a,n){localActions.add("delayedActions",{fnname:"actionLog",params:{label:e,id:t,aladdin:o,extra_data:a,tag:n}})}function mediaLike(e){function t(){function e(){}if("unlike"==r?a.attr("data-action","like").text("订阅"):a.attr("data-action","unlike").text("已订阅"),i.length){var t=parseInt(i.text());i.text("unlike"==r?t-1:t+1)}"string"==typeof from&&"media"==from&&window.ToutiaoJSBridge.call("media_"+r,{id:parseInt(n)},e)}function o(){localActions.execCommand("mediaLike",{media_id:n,type:r},t);var e="like"==r?"subscribe":"unsubscribe";actionLog(e,n)}var a=$(e),n=a.attr("media-id"),i=$("[data-type=media-follower]").filter("[media-id="+n+"]"),r=a.attr("data-action");is_api?o():user.loginRequired(o)}function initScrollEvents(){function e(e){var a=document.body.scrollHeight,n=window.scrollY||window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,i=window.innerHeight;n>=a-i-o&&$(window).trigger("scrollBottom",e.type),"scroll"==e.type&&(t&&clearTimeout(t),t=setTimeout(function(){$(window).trigger("scrollEnd")},300))}var t,o=100*(window.responsive||{dpr:1}).dpr;$(window).on("scroll load afterflow",e)}function animateScrollTo(e){var t=0;return e&&(e.offset&&(t+=e.offset),e.obj&&(t+=e.obj.offset().top)),setTimeout(function(){$("html, body").animate({scrollTop:t},400)},0),this}function debug(e){var t=$("#debug");t.length||($("<div id='debug'/>").appendTo("body"),t=$("#debug")),t.text(e)}function global_tip(e,t){t=t||3e3;var o=$("<div class='global_tip'/>").appendTo("body"),a=$("header"),n=0;a.length&&(n=Math.max(0,a.height())),o.show().text(e).css("top",n),setTimeout(function(){o.fadeOut(function(){o.remove()})},t)}function center_tip(e){var t=$("<div class='center_tip' style='  position: fixed; top: 50%; width: 100px; height: 100px; left: 50%; margin-left: -50px; margin-top: -100px; border-radius: 10px; text-align: center; font-size: 18px; color: rgb(255, 255, 255); background: rgba(0, 0, 0, 0.9); line-height: 100px;'/>").appendTo("body");t.show().text(e),setTimeout(function(){t.fadeOut(function(){t.remove()})},3e3)}function getDownloadUrl(e){var t=["//d.toutiao.com/kMq1/","//d.toutiao.com/YKJo/","//d.toutiao.com/y9BJ/"];switch(e){case"top":return"//d.toutiao.com/kMq1/";case"middle":return"//d.toutiao.com/YKJo/";case"comment":return"//d.toutiao.com/y9BJ/";case"bottom":return"//d.toutiao.com/edpg/";case"apponly":return"//d.toutiao.com/YKJo/";default:return t[getRandomInteger(0,t.length)]}}function getRandomInteger(e,t){return Math.floor(Math.random()*(t-e)+e)}function formatDuration(e){var t=0,o=e;return o=e%60,t=parseInt(e/60),[("00"+t).slice(-2),("00"+o).slice(-2)].join(":")}!function(){try{{window.localStorage}window.localStorageEnabled=!0}catch(e){window.localStorageEnabled=!1}}();var localActions={queueNames:"localActions,delayedActions",delayedInterval:null,queues:{},getStoredQueues:function(){var e=localStorage.queues;return("undefined"==e||void 0==e)&&(e={}),"string"==typeof e&&(e=JSON.parse(e)),e},init:function(){if(this.Q=this.getStoredQueues(),navigator.onLine)for(k in this.Q){var e=this.Q[k];e.length&&this.clear(k)}},add:function(e,t){var o=this.Q[e]||[];o.push(t),this.save(e,o);var a=this;"delayedActions"!=e||this.delayedInterval||(this.delayedInterval=setInterval(function(){a.clear(e)},1e3))},save:function(e,t){this.Q[e]=t,localStorage.queues=JSON.stringify(this.Q)},clear:function(e){for(var t=this.Q[e];t.length;){var o=t.shift(),a=o.fnname,n=o.params,i=this.callbacks[a];i&&i(n)}this.save(e,t),t.length||"delayedActions"!=e||(clearInterval(this.delayedInterval),this.delayedInterval=null)},callbacks:{mediaLike:function(e,t,o){var a="/pgc/"+e.type+"/",n={media_id:e.media_id};is_api&&(a="/api/2"+a,n=$.extend(n,common_params)),$.post(a,n).fail(ajaxNetworkErrorCallback).done(function(e){"success"==e.message?t&&t():(global_tip(NETWORKTIPS.SERVERERROR),o&&o())})},repin:function(e){var t="/group/article/"+e.id+"/"+e.type+"/",o={};is_api&&(t="/2/data/item_action/",o=$.extend({group_id:e.id,action:e.type},common_params)),$.post(t,o).fail(ajaxNetworkErrorCallback).done(function(e){"success"!==e.message&&global_tip(NETWORKTIPS.SERVERERROR)})},dislike:function(e){var t="/api/dislike/",o={group_id:e.id,action:"dislike"};is_api&&(t="/2/data/item_action/",o=$.extend(o,common_params)),$.post(t,o).fail(ajaxNetworkErrorCallback).done(function(){global_tip(NETWORKTIPS.RECOMMENDDISLIKE)})},actionLog:function(e){if(e){e.tag=e.tag||"headline";var t="/action_log/",o={label:e.label,value:e.id,tag:e.tag||"go_detail",extra_data:JSON.stringify(e.extra_data||{})};if(is_api){t="/2/wap/action_log/",o=$.extend(o,common_params);var a=e.aladdin;if(a&&gaqpush("Aladin",a+"_click",""),"click_search_new"==e.label){var n={category:"umeng",tag:"go_detail",label:"click_search_new",value:e.id,ext_value2:JSON.stringify({keyword:$.request("keyword")})},i="bytedance://"+($.os.android?"log_event?":"custom_event?")+$.param(n);return console.log("click_search_new",n),void(location.href=i)}}e.tag&&e.id&&$.post(t,o),console.log(o.label,o)}}},networkRequired:function(e,t){if(navigator.onLine){var o=this.callbacks[e];o&&o(t)}else this.add("localActions",{fnname:e,params:t})},execCommand:function(e,t,o,a){var n=this.callbacks[e];n&&n(t,o,a)},sendLog:function(e,t,o){var a={};a.tag=e,a.label=t,a.value=o,$.post("/action_log/",a)}};$(function(){localActions.init()});var is_toutiao=location.host.indexOf("toutiao.com")>=0,is_api=location.host.indexOf("snssdk.com")>=0,ua=navigator.userAgent,NETWORKTIPS={RETRY:"网络失败,点击重试",COMMENTRETRY:"评论加载失败,点击重试",NETWORKERROR:"网络失败",LOADING:"加载中...",WAITE:"加载中,请稍后",RECOMMENDING:"正在推荐...",RECOMMENDCOUNT:"为您推荐了#n#篇文章",RECOMMENDEMPTY:"暂无更新,请休息一会儿",RECOMMENDDISLIKE:"将减少类似推荐",HASMORE:"查看更多",SENDING:"正在提交",SENDINGERROR:"发表失败",SENDINGSUCCESS:"发表成功",GEOLOCATIONERROR:"获取地理位置失败",NOSEARCHDATA:"暂无搜索结果",SERVERERROR:"服务异常,请稍后重试",LOCALSTORAGEERROE:"请在 设置->Safari->阻止Cookie 中勾选 '来自第三方和广告商',或'永不',以免影响头条网正常使用"};$.browser=$.browser||{},$.browser.ios=/iPhone|iPod|iPad/i.test(ua),$.browser.iphone=/iPhone/i.test(ua),$.browser.ipad=/iPad/i.test(ua),$.browser.android=/Android/i.test(ua),$.browser.android4=/Android\s4/i.test(ua),$.browser.android2=/Android\s2/i.test(ua),$.browser.toutiao="http://nativeapp.toutiao.com"==document.referrer||/(News|NewsSocial|Explore|NewsArticle)( |\/)(\d.\d.\d)/i.test(ua);var errorimglist=[];window.scrollTop=function(){window.scrollTo(0,0)};var setCookieForLocal=function(e,t,o){for(var a in localStorage){var n=a.split("__");n[0]==e&&localStorage.removeItem(a)}localStorage[e+"___"+Date.now()+"___"+o]=t},getCookieForLocal=function(e){for(var t in localStorage){var o=t.split("___");if(3==o.length&&o[0]==e){var a=parseInt(o[1]),n=parseInt(o[2]);if(Date.now()-a<n)return localStorage[t]}}return null};formatDate=function(e,t){var o={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in o)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?o[a]:("00"+o[a]).substr((""+o[a]).length)));return t},"Common"in window||(window.Common={Utils:{getCookieForLocal:getCookieForLocal,setCookieForLocal:setCookieForLocal,initScrollEvents:initScrollEvents,getDownloadUrl:getDownloadUrl,testAD:function(){var e=$.cookie("tt_webid"),t=null!==e?parseInt(e)%10:void 0;return[1,2].indexOf(t)>-1?t:!1},appendScript:function(e){var t=$(e);t.length&&t.each(function(e,t){var o=document.createElement("script");o.src=$(t).attr("src"),$("body").append(o)})},appendQuery:function(e,t){var o,a;return t?(a=document.createElement("a"),a.href=e,o=a.search?a.search+"&"+t:"?"+t,a.protocol+"//"+a.host+a.pathname+o+a.hash):e},appendStyle:function(e){var t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.innerHTML=e;var o=document.getElementsByTagName("head")[0];o.appendChild(t)},formatDate:formatDate,formatDuration:formatDuration,isWeixin:function(){var e=navigator.userAgent.toLowerCase(),t=$.request("debug");return"weixin"==t||"micromessenger"==e.match(/MicroMessenger/i)?!0:!1},isAppInstalled:function(){if(!Common.Utils.isWeixin())return!1;var e=$.request("isappinstalled")-0,t=$.request("wxshare_count");return e&&(!t||2>t)?!0:!1},isGroupUrl:function(e){return e.match(/https?:\/\/(m\.)?toutiao\.com\/[a|i](\d+)/i)},getGTMValue:function(e,t){if(t="undefined"==typeof t?!1:t,window.ttGTM){var o=null;return o=window.isListPage?ttGTM.list:Common.Utils.isWeixin()?ttGTM.weixin:ttGTM.detail,o=o||{},e in o?o[e]:t}return t},getGroupIdFromUrl:function(e){var t=this.isGroupUrl(e);return t?t[2]:null},getGroupId:function(e){return e.attr("data-group-id")||e.parent().attr("data-group-id")},genRandomStr:function(e){e=e||15;var t=function(e){for(var t=[],o=0;e>o;o++){var a=String.fromCharCode(Math.floor(26*Math.random())+65),n=Math.ceil(10*Math.random());n%2===1&&(a=a.toLowerCase()),t.push(a)}return t.join("")},o=(Math.ceil(Math.random()*e),t(e)),a=o+t(e);return a},getParam:function(e,t){e&&"?"!=e[0]&&(e="?"+e);var o,a;return o=new RegExp("[\\?&]"+encodeURIComponent(t)+"=([^&#]*)"),a=o.exec(e),null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))},getScheme:function(e){var t,o={joke_essay:5,news_article:14,news_article_social:20,joke_essay_social:21,saying_essay_social:22,explore_article:25,joke_zone:27},a=e.app||$.request("app")||"news_article",n=1;return $.os.android&&(n=3),a.length?(t=o[a],(21==t||24==t)&&(t=5),22==t&&(t=9),20==t&&3==n&&(t=14),"snssdk"+t+n+"://"):""},getNativeLink:function(e){function t(e,t){var o=null;return t&&t.isNewVideo&&(o=64),o&&(e+="&flags="+o),e}var o=Common.Utils.getScheme(e),a=e.gdLabel||"click_weixin_home",n=e.type||"home",i=e.id,r="";switch(n){case"detail":r=o+"detail?groupid="+i+"&gd_label="+a,o=t(r,e);break;case"comment":r=o+"detail?groupid="+i+"&showcomment=1&gd_label="+a+"&gd_ext_json="+JSON.stringify({enter_comment:a}),o=t(r,e);break;case"mediaProfile":r=o+"media_account?media_id="+i+"&gd_ext_json="+JSON.stringify({event:"pgc_profile",label:a});break;case"home":r=o+"home?gd_ext_json="+JSON.stringify({event:"home",label:a})}return r},SEM:function(){var e="http://m.baidu.com/baidu.php?url=K60000jqVmuyEakZyAMwimW3ikMzy_aA7Q3PRiwXlb88su9bJtWAElng3Hcy2l_xfG713Dl726d5O4zCPC5uwy9hoNZGSq-By_jOSOawBQJqfg0uJB6VO8QwKzgadRzitLFYZ_0.DR_aA9R1PGI7CG6zYm2VYaM6uktEKA_nYQAHGlX5BC0.U1Yk0ZDqdVa4SoojzxMiqQgpztitEVpk_JR0IjLyYQMl8_5FSIQYVIoQkQzSdoAzGfKGUHYznWc0u1dLmvq8IM7bnfKdpHY0TA-b5HD0mv-b5H00UgfqnH0kPsKopHYs0ZFY5HTYnsK-pyfqnH0sPjDYg1bkg1DkPWKxPjDzg1RLn0KBpHYznjuxnW0snj7xnW0sPWn0UynqPWT4rHT3rHn0TgKGujYs0Z7Wpyfqn0KzuLw9u1Ys0AqvUjYkP1D1QHKxrjcLQHD0mycqn7ts0ANzu1Ys0ZKs5HDvP1mkrHbYn1f0UMus5H08nj0snj0snj00Ugws5H00uAwETjYs0ZFJ5H00uANv5gIGTvR0uMfqn6KspjYs0Aq15HD0mMTqPfK8IjY10ZPl5HD1nWKxnW0snfKYIgnqrj6Ynjc3rjn3n1cdnjn1PHT4PsKzug7Y5HDYPjnsP1mdnWRYnWc0Tv-b5HIhmHf4Pj-hP104PWuWnAm0mLPV5R77wWbsf1nswWNAfHD4wRc0mynqnfKBUjYs0APzm1YzrHcvP0&qid=7fa4949f70966c0f&sourceid=160&placeid=1&rank=1&shh=m.baidu.com&word=",t=function(e){e=e.replace(/(\w{2})/g,function(e,t){return"%"+t});try{e=decodeURIComponent(e)}catch(t){}return e},o=function(e,t){return e=e||"",t=t||"",-1!==e.indexOf(t,e.length-t.length)},a=function(){var a,n="tt_sem_type",i=document.referrer;if($.request("debug")&&(i=e),i)return a=document.createElement("a"),a.href=i,o(a.hostname,"sm.cn")?"sm":o(a.hostname,"sogou.com")?"sogou":"baidu";if($.request(n))return $.request(n);if($.request("sc")){var r=$.request("sc");return r=t(r)}var s=$.request("u");s=t(s);var l=null;switch(s+""){case"18748080":l="baidu";break;case"76979":l="sm";break;case"18711828":l="sogou"}return l},n=function(t,o){var n,i="tt_sem_word",r=t.referrer,s=a();return $.request("debug")&&(r=e),r?(n=t.createElement("a"),n.href=r,"sm"==s?Common.Utils.getParam(n.search,"q"):"sogou"==s?Common.Utils.getParam(n.search,"keyword"):Common.Utils.getParam(n.search,o)||Common.Utils.getParam(n.search,"wd")):$.request(i)?$.request(i):null};return{getWd:function(){return n(document,"word")},getSource:function(){return a()},getSearchQuery:function(){var e=location.search;return $.request("debug")&&(e="debug=1&a=e88f9ce8b0b1e5a4a7e585a83c32303135313031303e&c=e88f9ce8b0b12de58897e8a1a82de5ae89e58d93&u=3130383432363939&k=e88f9ce8b0b1e5a4a7e585a8"),e},getCommentPostData:function(e){var o={__type__:"sem",source:e.source,medium:e.medium,campaign:t(e.campaign),adgroup:t(e.adgroup),keyword:t(e.keyword),user_id:t(e.user_id),search:e.search};return o}}}(),sUrl:{getAppCommentData:function(e,t){var o={openurl:"",postdata:[]};return this.appendPostData(o,e),this.addOpenUrl(o,t),o},appendPostData:function(e,t){return e&&(e.postdata=e.postdata||[],t)?(e.postdata.push(t),!0):!1},addOpenUrl:function(e,t){return e&&t&&t.localAction&&t.localQuery?(e.openurl="sslocal://"+t.localAction+"?"+t.localQuery,!0):!1},fillOpenUrlData:function(e,t){if(e&&t&&(t.data("localAction")||t.parents("[data-local-action]").length)&&(t=t.data("localAction")?t:t.parents("[data-local-action]"),t.data("localQuery"))){var o=t.data("localAction"),a=t.data("localQuery");Common.Utils.sUrl.addOpenUrl(e,{localAction:o,localQuery:a})}return e}},profile:{getCommentPostData:function(e){e=e||{};var t=null;return(e.search||e.group_id)&&(t={__type__:"profile",search:e.search||e.keyword||"",group_id:e.group_id||"",keyword:e.keyword||""}),t}},appTrack:{getCommentPostData:function(){return{__type__:"app_track",resolution:window.screen.availWidth*window.devicePixelRatio+"*"+window.screen.availHeight*window.devicePixelRatio,webid:$.cookie("tt_webid")||"",utm_source:Common.Utils.getUTMValue("utm_source")}}},getUTMValue:function(e){return $.cookie(e)||$.request(e)||""},gotoAppDownload:function(){function e(e,t){var o=Common.Utils,a=o.sUrl,n=$(t.currentTarget),i=a.getAppCommentData();i=a.fillOpenUrlData(i,n);var r=o.appTrack.getCommentPostData();a.appendPostData(i,r);var s=o.appendQuery(e,"append="+encodeURIComponent(JSON.stringify(i)));return s}function t(e){setTimeout(function(){$("body").append("<iframe id='app_dl_iframe' src='"+e.yybHref+"' style='display:none'></iframe>"),setTimeout(function(){$("iframe#app_dl_iframe").remove(),location.href=e.fallback},1500)},100)}function o(o){{var n=Common.Utils;n.sUrl}if("object"!=typeof o)throw new Error("Invalid argument type. Object required.");if(!o.event)throw new Error("Missing required argument property: event");o.url&&(a[1]=o.url);var i=null;window.ttGTM&&(i=window.isListPage?ttGTM.list:n.isWeixin()?ttGTM.weixin:ttGTM.detail);var r=i&&i.yybSurl||a,s=e(r[1],o.event);if($.os.android)if(n.isWeixin()){var l=encodeURIComponent(n.getNativeLink(o));n.gotoSurlDownload(n.appendQuery(s,"android_scheme="+l),o.position)}else t({yybHref:r[0],fallback:s});else n.gotoSurlDownload(s,o.position)}var a=["tmast://appdetails?r=0.27985643851570785&pname=com.ss.android.article.news&oplist=1%3B2&via=ANDROIDWXZ.YYB.OTHERBROWSER&channelid=000116083232363434363139&appid=213141","//d.toutiao.com/N13p/"];return o}(),isNewVideoGroup:function(e){return e.data("isNewVideo")||(e=e.parent()),!1},isVWOTest:function(){return"function"==typeof window.isDoingVWO&&isDoingVWO()},gotoSurlDownload:function(e,t){console.log(e,t);var o=e.slice(e.indexOf("?")+1);Common.Utils.isWeixin()&&(1===window.recommendGalleryGALabel?e="//d.toutiao.com/NAvA/":2===window.recommendGalleryGALabel?e="recommendGallery"===t?"//d.toutiao.com/MVmD/":"//d.toutiao.com/Jd6S/":3===window.recommendGalleryGALabel&&(e="recommendGallery"===t?"//d.toutiao.com/AENU/":"//d.toutiao.com/knnc/"),o&&window.recommendGalleryGALabel>0&&(e=Common.Utils.appendQuery(e,o))),setTimeout(function(){location.href=e},100)}},UI:{countFormat:function(e){return e-=0,e>=1e4&&(e/=1e4,e=e.toFixed(1),-1!=e.indexOf(".0")&&(e=e.replace(".0","")),e+="万"),e}}}),$.request("utm_install_app")&&$.cookie("utm_install_app",$.request("utm_install_app")),$.request("show_comments_num")&&$.cookie("show_comments_num",$.request("show_comments_num"));