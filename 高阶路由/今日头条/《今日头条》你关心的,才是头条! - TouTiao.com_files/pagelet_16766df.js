define("pagelet/list_v2/bottom_banner/bottom_banner.js",function(o,e,n){var t=Common.Utils,a=o("common/utils/wap2app.js"),i=t.isWeixin();n.exports=Pagelet.extend({el:"#pageletBottomBanner",init:function(){{var o=t.getCookieForLocal("index_bottom_banner_closed");sessionStorage.getItem("full_screen_session")}if(!o){var e=this.$el;e.data("banner_show_time",Date.now()),e.on("click",function(o){var n,i=$(o.target);if(i.is(".close"))n="Close",t.setCookieForLocal("index_bottom_banner_closed",!0,1728e5),e.hide(),gaevent("bottom_banner","close","");else{n="App Download",gaevent("bottom_banner","download","");var s=$.os.ios?window.index_bottom_bannerurl_ios:window.index_bottom_bannerurl_android;t.gotoAppDownload({event:o,url:s}),a.gotoHome({gdLabel:"click_wap_list_bottom"})}var d=e.data("banner_show_time");gaevent("event","banner","index_bottombanner_time",Date.now()-d)}),e.show(),window.ttGTM&&ttGTM.ready(function(){t.getGTMValue("hideBottomBanner")&&this.$el.hide(),t.getGTMValue("bannerSubTitle")&&this.$el.find(".banner-label .title-sub").text(t.getGTMValue("bannerSubTitle"));var o=($.os.android||$.os.iphone&&!i)&&!t.getGTMValue("hideBonus");if(o){var e="";$.os.android?e=i?"//d.toutiao.com/R7d3/":"//d.toutiao.com/fABU/?append=%7B%22postdata%22%3A%5B%7B%22group_id%22%3A6767223601%2C%22__type__%22%3A%22redpack%22%7D%5D%7D&extra=%7B%22group_id%22%3A6767223601%2C%22__type__%22%3A%22redpack%22%2C%22channel%22%3A%22wap_hongbao_2%22%7D":$.os.iphone&&(e="//d.toutiao.com/FLFG/?append=%7B%22postdata%22%3A%5B%7B%22group_id%22%3A6767223601%2C%22__type__%22%3A%22redpack%22%7D%5D%7D&extra=%7B%22group_id%22%3A6767223601%2C%22__type__%22%3A%22redpack%22%2C%22channel%22%3A%22wap_hongbao_ios%22%7D");var n=i?"weixin-bonus":"wap-bonus",a='<div class="mask"></div><div class="bonus-wrapper"><i class="bonus-icon" style="display:block !important;"></i><a href='+e+' class="bonus '+n+'"><i class="bonus-close"></i></a></div>';$("body").append(a),$(".bonus-icon").on("click",function(){$(".mask").show(),$(this).hide(),$(".bonus").css("display","block")}),$(".bonus-close").on("click",function(o){o.preventDefault(),o.stopPropagation(),$(".mask").hide(),$(".bonus").hide()})}}.bind(this))}}})});
;define("pagelet/list_v2/index_header/index_header.js",function(e,n,t){var i=Common.Utils;t.exports=Pagelet.extend({el:"#pageletIndexHeader",events:{"click .top_menu_list .btn":"onMenuBtnClick","tap .msg-box":"onMsgBoxClick"},channels:{},init:function(){var e=this.$el,n=i.getCookieForLocal("show_msg");n||e.find(".circle").show(),window.ttGTM&&ttGTM.ready(function(){i.getGTMValue("hideTopMenuMore")&&this.$el.find(".top_menu_more").hide(),i.getGTMValue("hideTopBar")?(this.$el.find(".top_bar").hide(),setTimeout(function(){var n=e.find(".top_menu_bar").height();$("body.withHeader").css("paddingTop",n)})):i.getGTMValue("hideMsgBox")&&this.$el.find(".msg-box").hide()}.bind(this))},onMsgBoxClick:function(){listener.trigger("com.toutiao.m.ListPopupBanner","show-popup-banner"),this.$el.find(".circle").hide(),i.setCookieForLocal("show_msg",!0,864e5)},onMenuBtnClick:function(e){var n=$(e.currentTarget),t=n.data("url");if(history.replaceState){var i=function(){var e=[],n=$.request();for(var t in n)"channel"!==t&&e.push([t,encodeURIComponent(n[t])].join("="));var i=e.join("&");return i?i:""}(),o=(i?i+"&":"")+[t,t].join("#");history.replaceState(null,null,"/?"+o)}else location.hash=t;listener.trigger("com.toutiao.m.list","tag-change"),$(window).trigger("channelChange"),e.preventDefault()}})});
;define("pagelet/list_v2/list_content/dislike_action.js",function(t,e,i){var n={inited:!1,section:null,wrap:null,wrap_selector:"#after_wrap",list_action_menu_selector:".list_action_menu",list_action_btns:{dislike:'<span class="btn" data-toggle="dislike">不感兴趣</span>'},getTransitionSections:function(t){if(this.wrap)return this.wrap;var e=$(this.wrap_selector);if(e.length)return this.wrap=e,wrap;var i=(+new Date,$());if(t&&t.length)var n=t[0].nextElementSibling,o=t.outerHeight();else var n=indexFlow.list_content.find("section:first")[0],o=0;for(;n&&n.getBoundingClientRect().top<innerHeight+o;)i=i.add(n),n=n.nextElementSibling;var a=this.wrap_selector.replace("#","");return i.wrapAll("<div id='"+a+"'/>"),this.wrap=$("#"+a),this.wrap},removeSection:function(t){if($.os.android&&parseFloat($.os.version)<=2)return void t.remove();var e=this.getTransitionSections(t),i=t.outerHeight(),n=this;setTimeout(function(){t.animate({opacity:0,translate3d:"0,-100px,0"},350,"ease-in"),e.css("-webkit-transform","translate3d(0,-"+i+"px,0)").on("webkitTransitionEnd",function(){t.remove(),n.removeWrap()})},0)},removeWrap:function(){$(this.wrap_selector).children().unwrap(),this.wrap=null},showMenu:function(t,e){$(".mask").show();var i=this,n=$(t),o={right:16,top:0},a=t.getBoundingClientRect(),s=n.parents("section"),r=this.list_action_btns.dislike,l=innerWidth-a.right+o.right+a.width,c=a.top-a.height/2,d=this.addMenu(r,{right:l,top:c}),u=d.find("[data-toggle=dislike]");u.click(function(){i.removeSection(s),localActions.networkRequired("dislike",{id:e}),i.removeMenu(),$(".mask").hide(),localStorage.clear()})},addMenu:function(t,e){var i=this,n=$('<div class="action_menu list_action_menu clearfix" data-toggle="action_menu"></div>');return n.appendTo("body").prepend(t).css({right:e.right+"px",top:e.top+"px"}).on("touchmove",function(){return!1}),$.os.android&&parseFloat($.os.version)<=2||(n.addClass("animate"),setTimeout(function(){n.addClass("active")},0)),$("body").on("touchstart.list_action, mousedown.list_action",function(t){var e=$(t.target);if(!e.closest(".action_menu").length)return i.removeMenu(),$(".mask").hide(),!1}),this.menu=n,n},removeMenu:function(){var t=this.menu;t.removeClass("active"),setTimeout(function(){t.remove()},100),$("body").off("touchstart.list_action, mousedown.list_action")}};i.exports=n});
;define("pagelet/list_v2/list_content/pull2refresh_v2.js",function(e,t,i){TouchPull=e("common/utils/touchPull.js"),CanvasUtils=e("common/utils/canvasUtils.js");var n=function(e){function t(e){return e*(Math.PI/180)}function i(e,t){var i=[0,0],n=[i[0],i[1]+e],r=[i[0]+e/2,i[1]+e/2],s=[i[0],i[1]+e/2],o=t,a=[];a.push("M"+i.join(",")),a.push("L"+n.join(",")),a.push("L"+r.join(",")),a.push("L"+i.join(",")),o.find("path").attr("d",a.join(" ")),o[0].setAttribute("refX",s[0]),o[0].setAttribute("refY",s[1])}function n(n){n=e.extend({x:0,y:0,radius:0,margin:0,startDegree:0,endDegree:0,arrowSize:0,arrowObj:e("#markerArrow"),pathObj:e("#svgPath"),color:"#ff0000"},n);var r=n.radius,s=n.margin,o=r+s+r*Math.sin(t(n.endDegree)),a=r+s-r*Math.cos(t(n.endDegree)),l=r+s+r*Math.sin(t(n.startDegree)),u=r+s-r*Math.cos(t(n.startDegree));l=responsive.px2px(l),u=responsive.px2px(u),r=responsive.px2px(r),o=responsive.px2px(o),a=responsive.px2px(a);var c=[["M"+l,u].join(",")];c.push([["A"+r,r].join(","),"0",[n.endDegree-n.startDegree>180?"1":"0","1"].join(","),[o,a].join(",")].join(" "));var h=c.join(" ");e(n.pathObj).attr("d",h).css("stroke",n.color),e(n.arrowObj).find("path").css("fill",n.color),i(n.arrowSize,e(n.arrowObj))}return{drawArc:n}}(window.jQuery||window.Zepto,window);!function(e,t){var i=t.document,r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},s={con:"",minDistance:4},o=["onPullStart","onMove","onRelease","needRefresh","doRefresh","noop"],a=30,l=10,u=300,c=85*(responsive||{dpr:1}).dpr,h=10,p=function(e){var t=5*e/12;return t},f=function(){var e=document.createElement("canvas"),t=!(!e.getContext||!e.getContext("2d")),i=navigator.userAgent.toLowerCase(),n=(i.match(/chrome\/([\d.]+)/),i.match(/version\/([\d.]+).*safari/)),r=(i.match(/firefox\/([\d.]+)/),i.match(/mx[\d.]+/)),s=!1;return r&&n&&(s=!0),!t&&s}(),d=function(){return!0}(),v=function(n){"string"==typeof n.con&&(n.con=i.querySelector(n.con));var r={},a=this;e.each(o,function(e,t){r[t]=a["_"+t].bind(a)}),this.options=e.extend({},s,r,n),this.shouldRefresh=!1,this.isRefreshing=!1,this.$pullTip=null,r.onPullEnd=this._onPullEnd.bind(this),n=e.extend({},r,n),this.touchPull=t.TouchPull.init(n),this.refreshTimes=0};v.prototype={_onPullStart:function(e){this.isRefreshing||(e.preventDefault(),this.addPullTip(this.options.con))},_onMove:function(e,t){if(!this.isRefreshing){e.preventDefault();var i=p(t);i=this.isRefreshing?i+this.minRefreshDistance:i,this.movePullTip(i),this.changePullTip(i,this.options.con)}},_onPullEnd:function(e,i){if(!this.isRefreshing){var n=this;this.options.needRefresh(i),this.options.onRelease().then(function(){n.options.needRefresh()?(t._vis_opt_queue=t._vis_opt_queue||[],t._vis_opt_queue.push(function(){_vis_opt_goal_conversion(13359)}),n.isRefreshing=!0,n.refreshTimes+=1,n.options.doRefresh().always(function(){n.reset()})):(n.reset(),n.options.noop())})}},transitionDefer:null,onTransitionEnd:function(){var e=this;e.shouldRefresh?e.canvasObj.startAuto():e.reset(),setTimeout(function(){e.transitionDefer.resolve()},!1)},_onRelease:function(){if(this.transitionDefer=e.Deferred(),this.pullTipExist()){var t=this.$pullTip[0];t.addEventListener("webkitTransitionEnd",this.onTransitionEnd.bind(this),!1);var i=this.shouldRefresh?this.minRefreshDistance:0,n=!0;this.movePullTip(i,"all "+u+"ms linear",n)}else this.transitionDefer.resolve();return this.transitionDefer},_doRefresh:function(){var t=e.Deferred();return t.resolve(),t},_noop:function(){},_needRefresh:function(e){return e=p(e),!this.shouldRefresh&&e>=this.minRefreshDistance&&(this.shouldRefresh=!0),this.shouldRefresh},pullTipExist:function(){return this.$pullTip&&this.$pullTip[0]},reset:function(){var e=this.isRefreshing;this.isRefreshing=!1,this.shouldRefresh=!1,this.removePullTip(e)},canvasObj:function(){function i(){var e=(W+1)%q.length;return W=e,e}function s(e){return 360+e-I}function o(){k||b.clearRect(0,0,2*j,2*y)}function l(e){if(!f){var t=e.start,i=e.end,n=e.lineWidth,r=e.color,s=e.counterClockwise,a=e.co,l=e.clearRect;l&&o(),b.save(),b.globalCompositeOperation=a,b.beginPath(),b.arc(j,y,P,R(t),R(i),s),b.lineWidth=n,b.strokeStyle=r,b.stroke(),b.restore()}}function c(){if(!f){var e=B.speed,t=B.startAngle,n=z,r=B.color,o=B.lineWidth,a=B.counterClockwise,u=B.globalCompositeOperation,c=X||+new Date;n=+new Date,e=360/S*(n-c),X=n,z+=e,n=Math.min(Q,z);var h="draw"===H;if(!k&&(l({start:t,end:n,color:r,lineWidth:o,counterClockwise:a,co:u,clearRect:h}),z>=Q))if(b.closePath(),B="erase"!==H?U:F,H="erase"!==H?"erase":"draw","draw"===H){L=B.color;var p=i(L);B.color=q[p],B.startAngle=(B.startAngle-I)%360,z=B.startAngle,Q=s(z)}else z=B.startAngle=F.startAngle}}function p(e){if(!f){var t=F.speed,i=F.startAngle,n=F.startAngle,r=q[0];if(!isNaN(e)){e=Math.min(D.minRefreshDistance-a,e);var s=e/(D.minRefreshDistance-a),o=(Q-h)*s-F.startAngle;t=o}n+=t,N=n,v({start:i,end:n,color:r,distance:e})}}function d(){var t=D.minRefreshDistance-a,i=t/S*1.3,n=q[0],s=t,o=+new Date,l=e.Deferred(),u=function(){if(s>=0){var e=+new Date;s-=i*(e-o),o=e;var t=s/(D.minRefreshDistance-a),c=(Q-h)*t-F.startAngle,p=N-c;p=Math.min(p,N),v({start:p,end:N,color:n,distance:s}),r(u)}else l.resolve()};return r(u),l}function v(i){var r=i.distance,s=k?10:25,l=C,u=r/(D.minRefreshDistance-a);isNaN(r)||(s*=u,l=C*u),o(),k?n.drawArc({x:j,y:y,radius:P,margin:_,startDegree:i.start,endDegree:i.end,arrowSize:s,arrowObj:e(A).find("#markerArrow"),pathObj:e(A).find("#svgPath"),color:i.color}):(b.strokeStyle=i.color,b.fillStyle=i.color,t.CanvasUtils.drawArcedArrow(b,j,y,P,R(i.start),R(i.end),!1,1,2,R(45),s,C,l))}function w(e){var t=0;if(e){e=e.replace("matrix(","").replace(")",""),e=e.replace(/\s+/gi,"");var i=e.split(",");t=i[5]||0}return t}function m(){var e=w(D.$pullTip.css("transform"));if(!(a>e)){var t=u,i=e/t,n=e,s=+new Date,o=function(){if(n>a&&D.$pullTip){var e=+new Date,t=i*(e-s);n-=t,T(n-a),p(n-a),g(n-a),s=e,r(o)}};r(o)}}function g(t){var i=1*t/(D.minRefreshDistance-a);e(A).css("opacity",i)}function T(e,t){var i=e;t||(i=Math.max(0,(e-a)/D.minRefreshDistance*360)),A.style.webkitTransition="none",A.style.webkitTransform="rotate("+i+"deg)"}function R(e){return e*(Math.PI/180)}function x(e){clearTimeout(Y),e=e||8e3,Y=setTimeout(function(){D.reset()},e)}var D=null,A=null,b=null,k=!1,j=100,y=100,P=50,_=0,C=15,O=!1,E=5,$=0,M=1500,S=1e3,q=["green","red","blue","#f3b000"],L=q[0],W=1,F={startAngle:$,speed:E,color:q[0],counterClockwise:!1,globalCompositeOperation:"source-out",lineWidth:C},U={startAngle:$,speed:E,color:"white",counterClockwise:!1,globalCompositeOperation:"destination-out",lineWidth:C+40},z=$,N=$,B=F,H="draw",I=50,Q=0,X=0,Y=-1;return{init:function(e,t){this.reset(),X=0,O=!1,A=e.find("#load-tip-svg")[0]||e.find("#load-tip-canvas")[0],b=A.getContext?A.getContext("2d"):A,k=A.getContext?!1:!0,N=z=$,F.startAngle=U.startAngle=$,Q=s(z),W=1,F.color=q[W],H="draw",B=F,D=t,k?(_=9,j=y=P=(40-2*_)/2):(j=y=100,_=0,P=50)},reset:function(){A=null,b=null},drawArrowedArcByDis:function(e){p(e)},drawArc:function(e){f?console.log("not support"):c(e)},clearCurrent:function(){f?console.log("not support"):m()},rotate:T,changeOpacity:g,autoRotate:function(){var e=A.style.webkitTransform;e=e.replace("rotate(","").replace("deg","").replace(")","");var t=parseFloat(e),i=360/M,n=this,s=+new Date,o=function(){if(O){var e=+new Date,a=t+i*(e-s);s=e,n.rotate(a,!0),t=a,r(o)}};r(o)},autoDraw:function(){if(!f){var t=function(){O&&(k?(O=!1,e(b).attr("class","spinner")):(c(),r(t)))},i=d();i.done(function(){r(t)})}},startAuto:function(){O=!0,D.touchPull.detachEvent(),this.autoDraw(),this.autoRotate(),x()},stopAuto:function(){O=!1,D.touchPull.initEvent(),clearTimeout(Y)}}}(),initCanvas:function(){this.canvasObj.init(this.$pullTip,this)},addPullTip:function(t){this.removePullTip(),t=this.options.con;var i=this.$pullTip;if(!i){var n=[];if(n.push("<div class='list_top'>"),n.push("<div class='list_top_con v2'>"),d)n.push("<canvas                             id='load-tip-canvas'                             width='200'                             height='200'                             class='"+(f?"not-support":"")+"'></canvas>");else{var r=responsive.px2px(5),s=responsive.px2px(20),o=responsive.px2px(11),a=responsive.px2px(10),u=responsive.px2px(70),c=responsive.px2px(3.5),h=["M0,0","L0,"+a,"L"+r+","+r,"L0,0"].join(" ");n.push('<svg id="load-tip-svg" class="">                                <marker id="markerArrow" markerWidth="'+a+'" markerHeight="'+a+'" refX="0" refY="'+r+'"                                   orient="auto" markerUnits="userSpaceOnUse">                                    <path d="'+h+'" style="fill: #660000;" />                                </marker>                                <path stroke-width="'+c+'" stroke-linecap="round" id="svgPath" marker-end="url(#markerArrow)" d="M125,25 A100,100 0 0,1 125,25"                                      style="stroke:#660000; fill:none;"/>                                    <circle style="stroke-dasharray:'+u+';" id="svgCircle" class="path" fill="none" stroke-width="'+c+'" stroke-linecap="round" cx="'+s+'" cy="'+s+'" r="'+o+'"></circle>                             </svg>')}n.push("</div></div>"),this.$pullTip=e(n.join("")).insertAfter("body"),i=this.$pullTip,this.minRefreshDistance=i.outerHeight();var p=i[0];p.style.webkitTransition="none",p.style.webkitTransform="translate3d(0,"+l+"px,0)",p.style.top=t.getBoundingClientRect().top-this.minRefreshDistance+"px",this.initCanvas()}},movePullTip:function(e,t,i){if(this.pullTipExist()){var n=Math.min(c,e);this.$pullTip[0].style.webkitTransition=t||"none",this.$pullTip[0].style.webkitTransform="translate3d(0,"+n+"px,0)",0===e?this.canvasObj.clearCurrent():e>a&&(this.shouldRefresh?this.isRefreshing||i===!0||this.canvasObj.rotate(e):(c-5>=e&&this.canvasObj.rotate(e),this.canvasObj.drawArrowedArcByDis(e-a),this.canvasObj.changeOpacity(e-a)))}},changePullTip:function(){this.pullTipExist()},removePullTip:function(t){if(this.pullTipExist())if(t){var i=this;i.canvasObj.stopAuto(),i.$pullTip[0].style.webkitTransition="all 100ms linear",i.$pullTip.css("opacity",.1),i.$pullTip[0].style.webkitTransform+=" scale(0.1)"}else this.$pullTip[0].removeEventListener("webkitTransitionEnd",this.onTransitionEnd,!1),this.$pullTip.remove(),this.$pullTip=null,e(window).trigger("pullrefresh_pulltip_removed")}},t.PullRefresh={init:function(e){return new v(e)}}}(window.jQuery||window.Zepto,window),i.exports=window.PullRefresh});
;define("pagelet/list_v2/list_content/list_content.js",function(t,e,a){function i(t,e){var a=$(".refresh-tip"),i=(parseFloat(a.css("line-height")),$("#pageletIndexHeader").outerHeight());a.text(t).css("top",i).show(),setTimeout(function(){a.fadeOut(function(){a.hide()})},2e3)}var n=t("common/utils/flow.js"),o=t("common/utils/wap2app.js"),l=t("pagelet/list_v2/list_content/pull2refresh_v2.js"),s=t("common/utils/ads.js"),r=Common.Utils,c=!0,d=JSON.parse(r.getCookieForLocal("ad_material_options"))||{},h=[],f=!1,g=t("common/verification/verification.js"),u={init:function(){this.reflowCon=$("#top_menu"),this.reflowList=this.reflowCon.find(".top_menu_list"),this.selectedTab=$(),this.restoreTabs(),this.allTabs=this.reflowCon.find("a"),this.getTabPosition(),this.doTabSwitch(tag)},doTabSwitch:function(t){t=t||window.tag;var e=this.allTabs.filter("[data-url*="+t+"]"),a=$(e),i=parseInt(a.attr("scroll-left"));a.attr("class").indexOf("cur")>-1||(a.addClass("cur"),this.selectedTab.length&&this.selectedTab.removeClass("cur"),this.selectedTab=a,this.reflowCon.scrollLeft(i))},getTabPosition:function(){var t=document.body.clientWidth,e=this.reflowList[0].clientWidth,a=this.reflowList[0].scrollWidth;this.allTabs.each(function(){var i,n=this.clientWidth,o=this.getBoundingClientRect().left;i=e/2-n/2>=o?0:o>a-e/2-n/2?Math.max(a-e,0):-t/2+n/2+o,this.setAttribute("scroll-left",i)})},restoreTabs:function(){function t(t){var e=channelItemTemplate;for(k in t)e=e.replace("#"+k+"#",t[k]);return e}for(var e=localStorageEnabled?localStorage.menuDefaults:"",a=e?e.split(","):channelCategory.slice(0,channelDefaultCount),i=0;i<a.length;i++){var n=a[i],o=$.inArray(n,channelCategory);o>-1&&this.reflowList.append(t({category:n,name:channelCategoryName[o]}))}}},p={last_update:1416217875388,init:function(){var t=this;this.getSelectedChannel();var e=$.request("utm_source")||$.cookie("utm_source"),a={list_content:".list_content",list_top:".list_top",list_bottom:".list_bottom",fresh_btn:"[action-type=fresh]",url:"/list/",param:{tag:tag,ac:"wap",item_type:item_type||4,count:20,format:"json",list_data_v2:1},after_flow:function(e,a){if(a&&a.data&&a.data.captcha)return void p.codeVerification(a.data.captcha);if("prepend"==e){var n=a.return_count>0?NETWORKTIPS.RECOMMENDCOUNT.replace("#n#",a.return_count):NETWORKTIPS.RECOMMENDEMPTY;i(n)}"object"==typeof s&&setTimeout(function(){s.initShowEvents({attribute:"data-show"})},500),window.ttGTM&&ttGTM.ready(function(){var t=ttGTM.adMaterialOptions;if(h=0==h.length&&t?t.adMaterialChannels:h,c&&$(h).indexOf($.hash("channel"))>-1&&t){var e=(new Date).getTime()-t.adMaterialUpateTime;if(e>=0?f||(r.setCookieForLocal("ad_material_options",JSON.stringify(t),864e5-e),f=!0):t=d,void 0!=t.adMaterials){var a=(t.adMaterialPos||3,Math.floor(Math.random()*t.adMaterials.length)),i=t.adMaterials[a];if(i&&0==$(".ad-material-link").length){var n='<section class="has_action"><div class="one-px-border"></div><a href="'+i.href+'" class="article_link ad-material-link clearfix"ga_category="creative" ga_event="download" ga_label="'+a+'" data-format="1"><h3 class="dotdot line3 ">'+i.title+'</h3><div class="list_img_holder_large list_img_holder_large_fix"><img src="'+i.src+'" onerror="errorimg.call(this)" onload="loadimg.call(this)"></div><div class="item_info"><span class="ad-material space">APP</span><span class="src">今日头条</span></div></a></section>';$('section[data-format="0"]:nth-child(3)').after(n),gaevent("creative","show",a,1,{nonInteraction:!0})}}}c=!1}),$(".time").timeago({daysAgoFormat:"MM-dd"}),$(".video-icon").hide().parents(".list_img_holder").append('<span class="video-btn"></span>'),t.formatNews(),listener.trigger("com.toutiao.pageletListContent","flow-done",{tag:tag,isFirstLoad:c})},cache:"wififeed"!=e,cache_key:"listArticle_160519_"+tag};"wififeed"==r.getUTMValue("utm_source")&&(a.ad_gap=3,a.ad_pos=3);var l=navigator.userAgent;l.indexOf("ArticleStreamSdk")>-1&&(a.onArticleClick=function(t,e,a){t.preventDefault(),$(".sslocal").remove();var i="http://m.toutiao.com"+a,n=document.createElement("iframe");n.style.display="none",n.src="sslocal://detail?groupid="+e+"&url="+i,$(n).addClass("sslocal"),$(document.body).append(n)}),indexFlow=new n(a),u.init(tag,indexFlow),$("#pageletListContent").on("click",".article_link",function(t){var e=$(this);e.hasClass("ad-material-link")&&(t.preventDefault(),r.gotoAppDownload({event:t,url:$(this).attr("href")})),actionLog(e.attr("data-action-label"),e.parent().attr("data-group-id"),null,{item_id:e.parent().attr("data-item-id")||"0"});try{var a=e.parents("section"),i=a.parent().find("section").index(a);i>-1&&window.gaevent&&gaevent("feed",window.tag,"click-"+(i+1))}catch(t){}window.ttGTM&&ttGTM.ready(function(){if($.os.android&&window.chrome&&r.getGTMValue("gotoDetailWhenFromListPage",!0)){var a=($(t.currentTarget).attr("href"),e.parent());o.gotoDetail({id:a.attr("data-group-id"),gdLabel:"click_wap_list_article"})}})}),$(window).bind("popstate",function(){t.onTagChange()}),this.initPullRefresh();var l=navigator.userAgent;l.indexOf("ArticleStreamSdk")>-1&&p.bindNativeRefreshHandler(function(){var t=this;this.pullRefresh.addPullTip(this.pullRefresh.options.con),this.pullRefresh.movePullTip(100),this.pullRefresh.canvasObj.startAuto(),indexFlow.refresh(function(){t.pullRefresh.reset(),t.pullRefresh.canvasObj.stopAuto()})})},formatNews:function(t){t="boolean"==typeof t?t:!1,$("#pageletListContent .middle_mode").each(function(){var e=$(this);if(!e.attr("data-isShown")||!t){e.attr("data-isShown","true");var a=e.find("h3"),i=e.find(".item_info"),n=i.height(),o=parseFloat(i.find(".src").css("line-height")),l=responsive.px2px(6),s=a.height(),r=(parseFloat(a.css("line-height")),e.find(".list_img_holder")),c=r.height(),d=responsive.px2px(1);n>o+d?i.find(".time").hide():t||i.find(".time").show(),r.length&&(c>=s+n?(e.find(".desc").css("vertical-align","middle"),r.css("vertical-align","middle"),e.find(".dislike-news").addClass("mid-space").removeClass("fly-right"),i.css("margin-top",l)):s+n>c&&(e.find(".desc").css("vertical-align","top"),r.css("vertical-align","top"),e.find(".dislike-news").removeClass("mid-space").addClass("fly-right"),i.css("margin-top",l+c-s)))}})},clearCache:function(t){if(t){var e=localStorage.lastest_cache||0;parseInt(e)<t&&localStorage.clear(),localStorage.lastest_cache=$.timestamp()}},getSelectedChannel:function(){var t=$.hash("channel");if(!t)return"";var e=parseInt(t.substr(0,1));window.tag=e?t.substr(1):t},initPullRefresh:function(){this.pullRefresh=l.init({con:"div[pull-fresh]",minDistance:4,doRefresh:function(){var t=$.Deferred();return indexFlow.before_flow=function(){t.resolve();var e=$.Deferred();return $(window).one("pullrefresh_pulltip_removed",function(){e.resolve()}),e},indexFlow.refresh(function(){indexFlow.before_flow=null}),t},noop:function(){indexFlow.storeFlow()}})},bindNativeRefreshHandler:function(t){var e=this;window.refreshCallback=function(){t.apply(e,arguments)},window.searchCallback=function(){location.href="//m.toutiao.com/search/"}},onTagChange:function(){location.hash&&(this.getSelectedChannel(),u.doTabSwitch(),gaevent("channel",window.tag,""),c=!0,indexFlow.cache_key="listArticle_"+window.tag,indexFlow.reflow({tag:window.tag,item_type:window.item_type}),window.resendGA&&resendGA(),listener.trigger("com.toutiao.m.ChannelWidget","hide-widget"),listener.trigger("com.toutiao.m.ChannelWidget","show-widget",window.tag))},codeVerification:function(t){g().show({captcha:t,successCb:function(){}})}};initScrollEvents(),p.init(),a.exports=Pagelet.extend({el:"#pageletListContent",channels:{"com.toutiao.m.list tag-change":"onTagChange"},init:function(){window.ttGTM&&ttGTM.ready(function(){r.getGTMValue("allDownload")&&document.body.addEventListener("click",function(t){t.stopPropagation(),t.preventDefault(),gaevent("list_alldownload","click");var e=$(t.target);e.parents("#pageletPopupBanner").length||e.parents(".tt-modal").length?e.hasClass("close")?listener.trigger("com.toutiao.m.ListPopupBanner","hide-popup-banner"):r.gotoAppDownload({event:t}):listener.trigger("com.toutiao.m.ListPopupBanner","show-popup-banner")}.bind(this),!0)}.bind(this))},onTagChange:function(){p.onTagChange()}})});
;define("pagelet/list_v2/popup_banner/popup_banner.js",function(require,exports,module){var template=function(obj){{var __p="";Array.prototype.join}with(obj||{})__p+='<div id="pageletPopupBanner" class="tt-modal" style="display:none">\n    <div class="popup">\n        <div class="banner"></div>\n        <p>已加载好您感兴趣的头条</p>\n        <div class="download-btn" data-node="downloadBtn" ga_category="left_top" ga_label="" ga_event="download">立即打开</div>\n        <div class="close" data-node="close"></div>\n    </div>\n</div>';return __p},Wap2AppUtils=require("common/utils/wap2app.js");module.exports=Pagelet.extend({el:template({}),events:{"tap $close":"onClose","click $downloadBtn":"onDownload"},channels:{"com.toutiao.m.ListPopupBanner show-popup-banner":"showPopupBanner"},init:function(){this.$el.appendTo(document.body),this.$el.on("touchmove",function(o){o.preventDefault()})},onDownload:function(){Common.Utils.gotoAppDownload({event:event,url:Common.Utils.isWeixin()?"//d.toutiao.com/knnc/":"//d.toutiao.com/2ePc/"}),Wap2AppUtils.gotoHome({gdLabel:"click_wap_list_indexleft"})},onClose:function(){gaevent("left_top","close",""),this.$el.hide()},showPopupBanner:function(){this.$el.show()}})});
;define("pagelet/list_v2/xpromt_items/xpromt_items.js",function(require,exports,module){var TMPL_SMALL_IMG=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+='<section data-is-video="False" hot-time="" class="has_action xpromt_item" data-group-id="" data-item-id="" data-format="0">\n    \n    <div class="one-px-border"></div>\n\n    <a href="'+(null==(__t=url)?"":__t)+'" class="article_link clearfix " ga_category="'+(null==(__t=ga.category)?"":__t)+'" ga_event="click" data-action-label="click_xpromt_item">\n\n        <h3 class="dotdot line3 ">'+(null==(__t=title)?"":__t)+'</h3>\n\n\n        <div class="list_image">\n            <ul class="clearfix">\n                ';for(var i=0;i<pics.length;i++)__p+='\n                <li class="list_img_holder" style="background: none;"><img src="http://s3.pstatp.com/site/promotion/landing_page/img/'+(null==(__t=pics[i])?"":__t)+'" style="opacity: 1;"></li>\n                ';__p+='\n            </ul>\n        </div>\n\n\n        <div class="item_info">\n            <span class="hot_label space">热</span>\n            <span class="src space">'+(null==(__t=src)?"":__t)+"</span>\n        </div>\n\n    </a>\n</section>"}return __p},TMPL_SINGLE_IMG=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<section data-is-video="False" hot-time="" class="middle_mode has_action xpromt_item" data-group-id="" data-item-id="" data-format="0">\n    <div class="one-px-border"></div>\n    <a href="'+(null==(__t=url)?"":__t)+'" class="article_link clearfix " ga_category="'+(null==(__t=ga.category)?"":__t)+'" ga_event="click" data-action-label="click_xpromt_item">\n        <div class="desc">\n            <h3 class="dotdot line3 ">'+(null==(__t=title)?"":__t)+'</h3>\n            <div class="item_info">\n                <span class="hot_label space">热</span>\n                <span class="src space">'+(null==(__t=src)?"":__t)+'</span>\n            </div>\n        </div>\n        <div class="list_img_holder" style="background: none;">\n            <img src="http://s3.pstatp.com/site/promotion/landing_page/img/'+(null==(__t=pics[0])?"":__t)+'">\n        </div>\n    </a>\n</section>';return __p};module.exports=Pagelet.extend({el:"#pageletXpromtItems",channels:{"com.toutiao.pageletListContent flow-done":"onListFlowDone"},init:function(){},render:function(t){var n=$("#pageletListContent .list_content");n.find(".xpromt_item").remove(),$.each(t,function(t,i){var a=null;if(i.pics&&(len=i.pics.length,a=1==len?TMPL_SINGLE_IMG(i):TMPL_SMALL_IMG(i)),a){var e=n.find("section")[i.position-1];e&&($(a).insertBefore($(e)),window.gaevent&&window.gaevent(i.ga.category,"show"))}})},onListFlowDone:function(t,n){{var i=n.tag;n.isFirstLoad}window.ttGTM&&ttGTM.ready(function(){if(ttGTM.xpromtOptions){var t=ttGTM.xpromtOptions;if(i in t){var n=t[i];$.isArray(n)||(n=[n]),this.render(n)}}}.bind(this))}})});